// schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite" // Cambiado a sqlite
  url      = env("DATABASE_URL") // Usa la URL de SQLite desde el .env
}

model Clientes {
  cliente_id        Int       @id @default(autoincrement())
  nombres           String
  apellido_paterno  String
  apellido_materno  String
  correo            String @unique
  telefono          String
  dni               String
  cargo_actual      String
  area_actual       String
  empresa_id        Int
  empresa           Empresas  @relation(fields: [empresa_id], references: [empresa_id])
  cliente_pruebas   ClientePruebas[]

  @@map("clientes") // Mapea el nombre de la tabla en la base de datos
}

model Empresas {
  empresa_id       Int           @id @default(autoincrement())
  nombre_empresa   String
  clientes         Clientes[]

  @@map("empresas") // Mapea el nombre de la tabla en la base de datos
}

model Pruebas {
  prueba_id        Int            @id @default(autoincrement())
  tipo_prueba      String
  link             String
  usuario          String?  // Permite NULL
  clave            String?  // Permite NULL
  cliente_pruebas  ClientePruebas[]

  @@map("pruebas") // Mapea el nombre de la tabla en la base de datos
}

model ClientePruebas {
  cliente_id        Int
  prueba_id         Int
  inicio_assessment DateTime
  fin_assessment    DateTime
  cliente           Clientes  @relation(fields: [cliente_id], references: [cliente_id])
  prueba            Pruebas   @relation(fields: [prueba_id], references: [prueba_id])

  @@id([cliente_id, prueba_id]) // Clave primaria compuesta
  @@map("cliente_pruebas") // Mapea el nombre de la tabla en la base de datos
}